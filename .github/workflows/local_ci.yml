name: local ci

on:
  - push
  - pull_request

jobs:
  tests:
    name: test dynamodb local
    runs-on: ubuntu-latest
    steps:
      - name: clone repo
        uses: actions/checkout@v2.1.0
      - name: install deno
        uses: denolib/setup-deno@master
      - name: start a local dynamodb
        run: curl -fsSL https://denopkg.com/chiefbiiko/dynamodb@v0.2.0/start_db.sh | bash
        # run: make local_dl
      - name: sleep 2 allow db startup
        run: sleep 5.0
      - name: run tests
        run: make tests